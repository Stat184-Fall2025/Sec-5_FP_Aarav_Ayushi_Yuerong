library(tidyverse)
head(Flights)
library(tidyverse)
library(lubridate)
library(nycflights23)
library(lubridate)
library(nycflights23)
install.packages("nycflights13")
library(nycflights13)
library(tidyverse)
library(lubridate)
library(nycflights23)
install.packages("nycflights23")
detach("package:nycflights13", unload = TRUE)
library(nycflights23)
library(dplyr)
library(tidyverse)
library(lubridate)
install.packages("nycflights13")
library(nycflights23)
Flights <- nycflights23::flights %>%
select(year, month, day, dep_delay, dep_time, arr_delay, arr_time, origin) %>% # dep-time and arr-time are saved here in case we want to do investigation on stat of what time section of day have the most possibility of delay
mutate(
flight_date = make_date(year, month, day) # date compressed into format yyyy-mm-dd using year, month, day columns, more precise to view
) %>%
select(flight_date, dep_delay, dep_time, arr_delay, arr_time, origin)%>%
filter(!is.na(dep_delay), !is.na(arr_delay)) #filter invalid rows
head(Flights)
{r}
Flights <- nycflights23::flights %>%
select(year, month, day, dep_delay, dep_time, arr_delay, arr_time, origin) %>% # dep-time and arr-time are saved here in case we want to do investigation on stat of what time section of day have the most possibility of delay
mutate(
flight_date = make_date(year, month, day) # date compressed into format yyyy-mm-dd using year, month, day columns, more precise to view
) %>%
select(flight_date, dep_delay, dep_time, arr_delay, arr_time, origin)%>%
filter(!is.na(dep_delay), !is.na(arr_delay)) #filter invalid rows
library(tidyverse)
library(dplyr)
library(lubridate)
library(nycflights23)
library(tidyverse)
library(dplyr)
library(lubridate)
library(nycflights23)
library(tidyverse)
library(dplyr)
library(lubridate)
library(nycflights23)
Flights <- nycflights23::flights %>%
select(year, month, day, dep_delay, dep_time, arr_delay, arr_time, origin) %>%
mutate(flight_date = make_date(year, month, day)) %>%
select(flight_date, dep_delay, dep_time, arr_delay, arr_time, origin) %>%
filter(!is.na(dep_delay), !is.na(arr_delay))
head(Flights)
View(Flights)
avg_dep <- Flights %>%
group_by(origin) %>%
summarise(avg_dep_delay = mean(dep_delay, na.rm = TRUE))
ggplot(avg_dep, aes(x = origin, y = avg_dep_delay)) +
geom_col() +
labs(
title = "Average Departure Delay by Origin",
x = "Origin",
y = "Average Departure Delay (minutes)"
)
avg_dep <- Flights %>%
group_by(origin) %>%
summarise(avg_dep_delay = mean(dep_delay, na.rm = TRUE))
ggplot(avg_dep, aes(x = origin, y = avg_dep_delay)) +
geom_col('blue') +
labs(
title = "Average Departure Delay by Airline",
x = "Origin",
y = "Average Departure Delay (minutes)"
)
avg_dep <- Flights %>%
group_by(origin) %>%
summarise(avg_dep_delay = mean(dep_delay, na.rm = TRUE))
ggplot(avg_dep, aes(x = origin, y = avg_dep_delay)) +
geom_col('') +
labs(
title = "Average Departure Delay by Airline",
x = "Origin",
y = "Average Departure Delay (minutes)"
)
View(avg_dep)
late_flights <- Flights %>%
filter(arr_delay > 0) %>%
count(origin)
ggplot(late_flights, aes(x = origin, y = n, fill = origin)) +
geom_col() +
labs(
title = "Number of Late Arrivals by Airport",
x = "Origin",
y = "Count of Late Flights"
) +
guides(fill = "none")
late_arrivals <- Flights %>%
filter(arr_delay > 0) %>%
count(origin)
ggplot(late_arrivals, aes(x = origin, y = n, fill = origin)) +
geom_col() +
labs(
title = "Late Arrivals by Origin",
x = "Origin",
y = "Number of Late Flights"
) +
guides(fill = "none")
View(avg_dep)
View(Flights)
View(late_arrivals)
View(late_flights)
late_arrivals <- Flights %>%
filter(arr_delay > 0) %>%
count(origin)
ggplot(late_arrivals, aes(x = origin, y = n, fill = origin)) +
geom_col() +
labs(
title = "Late Arrivals by Origin",
x = "Origin",
y = "Number of Late Flights"
) +
guides(fill = "none")
late_arrivals <- Flights %>%
filter(arr_delay > 0) %>%
count(origin)
ggplot(late_arrivals, aes(x = origin, y = n, fill = origin)) +
geom_col() +
labs(
title = "Late Arrivals by Origin",
x = "Origin",
y = "Number of Late Flights"
) +
guides(fill = "none")
ggplot(late_arrivals, aes(x = origin, y = n, fill = origin)) +
geom_col() +
labs(
title = "Delayed Arrivals by Origin",
x = "Origin",
y = "Number of Late Flights"
) +
guides(fill = "none")
ggplot(late_arrivals, aes(x = origin, y = n, fill = origin)) +
geom_col() +
labs(
title = "Delayed Arrivals by Origin",
x = "Origin",
y = "Number of Late Flights"
) +
ggplot(late_arrivals, aes(x = origin, y = n, fill = origin)) +
geom_col() +
labs(
title = "Delayed Arrivals by Origin",
x = "Origin",
y = "Number of Late Flights"
) +
late_arrivals <- Flights %>%
filter(arr_delay > 0) %>%
count(origin)
late_arrivals <- Flights %>%
filter(arr_delay > 0) %>%
count(origin)
ggplot(late_arrivals, aes(x = origin, y = n, fill = origin)) +
geom_col() +
labs(
title = "Delayed Arrivals by Origin",
x = "Origin",
y = "Number of Late Flights"
) +
guides(fill = "none")
late_arrivals <- Flights %>%
filter(arr_delay > 0) %>%
count(origin)
ggplot(late_arrivals, aes(x = origin, y = n, fill = origin)) +
geom_col() +
labs(
title = "Delayed Arrivals by Airport",
x = "Origin",
y = "Number of Late Flights"
) +
guides(fill = "none")
late_arrivals <- Flights %>%
filter(arr_delay > 0) %>%
count(origin)
ggplot(late_arrivals, aes(x = origin, y = n, fill = origin)) +
geom_col() +
labs(
title = "Number of Delayed Arrivals vs Airport of Departure",
x = "Origin",
y = "Number of Late Flights"
) +
guides(fill = "none")
ggplot(late_dep, aes(x = origin, y = n, fill = origin)) +
geom_col() +
labs(
title = "Number of Late Departures by Airport",
x = "Origin",
y = "Count of Late Flights"
) +
guides(fill = "none")
late_dep <- Flights %>%
filter(dep_delay > 0) %>%
count(origin)
ggplot(late_dep, aes(x = origin, y = n, fill = origin)) +
geom_col() +
labs(
title = "Number of Late Departures by Airport",
x = "Origin",
y = "Count of Late Flights"
) +
guides(fill = "none")
x = "Origin",
late_dep <- Flights %>%
filter(dep_delay > 0) %>%
count(origin)
ggplot(late_dep, aes(x = origin, y = n, fill = origin)) +
geom_col() +
labs(
title = "Number of Delayed Departures by Airport",
x = "Origin",
y = "Count of Late Flights"
) +
guides(fill = "none")
Delay_rates
Delay_rates <- Flights %>%
summarise(
dep_delay_rate = mean(dep_delay > 15),
arr_delay_rate = mean(arr_delay > 15) # According to U.S. Department of Transportation, only flights arrived 15 minutes later than planned will be considered a delayed flight, though there is no regulation of delayed departure, we will still use 15 minutes rule here
)
Delay_rates
View(Delay_rates)
JFK_flights <- Flights %>%
filter(origin == "JFK") %>%              # keep only flights from JFK
select(flight_date, dep_delay, dep_time, arr_delay, arr_time)
EWR_flights <- Flights %>%
filter(origin == "EWR") %>%              # keep only flights from EWR
select(flight_date, dep_delay, dep_time, arr_delay, arr_time)
LGA_flights <- Flights %>%
filter(origin == "LGA") %>%              # keep only flights from LGA
select(flight_date, dep_delay, dep_time, arr_delay, arr_time)
# Calculate delay rates for each airport
JFK_delay_rates <- calculate_delay_rates(JFK_flights)
# Calculate delay rates for each airport
JFK_delay_rates <- Delay_rates(JFK_flights)
Delay_rates <- function(df) {
df %>%
summarise(
dep_delay_rate = mean(dep_delay > 15, na.rm = TRUE),
arr_delay_rate = mean(arr_delay > 15, na.rm = TRUE)
)
}
View(EWR_flights)
# Calculate delay rates for each airport
JFK_delay_rates <- Delay_rates(JFK_flights)
EWR_delay_rates <- Delay_rates(EWR_flights)
LGA_delay_rates <- Delay_rates(LGA_flights)
# View results
JFK_delay_rates
EWR_delay_rates
LGA_delay_rates
View(EWR_delay_rates)
View(JFK_delay_rates)
View(LGA_delay_rates)
View(LGA_flights)
View(LGA_delay_rates)
View(late_flights)
View(late_arrivals)
View(JFK_flights)
View(JFK_delay_rates)
View(Flights)
View(EWR_delay_rates)
View(avg_dep)
JFK_delay_rates
EWR_delay_rates
LGA_delay_rates
ggplot(late_departures, aes(x = origin, y = n, fill = origin)) +
geom_col() +
labs(
title = "Delayed Departures by Airport",
x = "Origin Airport",
y = "Number of Late Flights"
) +
guides(fill = "none")
library(tidyverse)
library(lubridate)
library(nycflights23)
head(flights_data)
flights_data <- nycflights23::flights %>%
select(year, month, day, dep_delay, dep_time, arr_delay, arr_time, origin) %>%
mutate(flight_date = make_date(year, month, day)) %>%
select(flight_date, dep_delay, dep_time, arr_delay, arr_time, origin) %>%
filter(!is.na(dep_delay) & !is.na(arr_delay))
head(flights_data)
late_arrivals <- flights_data %>%
filter(arr_delay > 0) %>%
count(origin)
ggplot(late_arrivals, aes(x = origin, y = n, fill = origin)) +
geom_col() +
labs(
title = "Delayed Arrivals by Airport of Departure",
x = "Origin Airport",
y = "Number of Late Flights"
) +
guides(fill = "none")
